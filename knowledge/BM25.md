### BM25 (simple explanation)

**BM25** is a classic way to rank documents for **keyword search**.

#### The idea (in one sentence)
BM25 gives a higher score when the query words appear **often** in a document, but not “too often”, and when they are **rare across the whole collection** (rare words are more informative).

#### Why it matters for RAG
- Vector search finds “similar meaning”.
- **BM25 finds exact words / phrases** very well (names, IDs, error messages, APIs).
- Many RAG systems use **hybrid search** (BM25 + vectors) because it’s more robust.

#### How BM25 decides a score (high level)
- **Term frequency**: more occurrences of a word → usually more relevant (but diminishing returns).
- **Inverse document frequency (IDF)**: a word that appears in fewer documents → more important.
- **Length normalization**: very long documents don’t automatically win just because they have more words.

#### Tiny example
Query: “docker daemon running”

- Document A: “Docker daemon is running. Docker daemon… (lots of matches)” → high BM25
- Document B: “Containers and images overview…” → low BM25

#### When BM25 is the best choice
- error messages, stack traces, exact API names
- IDs like `db6af72` or `HTTP 400`
- “find the paragraph that literally contains this phrase”

#### When BM25 is weak
- If the document uses different words with the same meaning (synonyms).
  - Example: query says “crash”, doc says “segfault”.
  - Vector search helps there.


